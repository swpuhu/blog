# 法线贴图（凹凸映射 Bump Mapping ）

## 简介

今天我们学习的内容是法线贴图，法线贴图也是贴图的一种。在法线贴图中，储存了每个像素点的法线方向。（法线方向用 x,y,z 表示，贴图中的 r,g,b 三个通道正好可以表示）。

### 动机

法线贴图通常使用在一些模型精度不是很高，但是需要展示更多细节的地方。比如，我们需要渲染一面砖墙。我们当然可以在建模工具中将每一块的砖的顶点数据都表示出来，但是这样做的代价就是巨大的人工成本。而使用法线贴图则可以将砖墙的法线存储在一张图片中，在渲染时再进行计算。

观察下面两张图片（左侧为没有应用法线贴图，右侧应用了法线贴图），我们可以发现应用了发现贴图的立方体更加显得有凹凸感。而我们却没有对模型的顶点做出任何的修改。这就是法线贴图的便利之处。

<ImgContainer :srcs="['/img/three-example/brick-main.png', '/img/three-example/brick-normal.png']"/>

## 法线贴图的类型

法线贴图中存储的是物体的法线方向，由于法线方向处于[-1, 1]的范围之间，而像素颜色的 RGB 则处于[0,1]之间。那么我们需要做一个映射，不难得出下面的公式：

$$
color = \frac{normal + 1}{2}
$$

$$
normal = color \times 2 - 1
$$

### 模型空间法线贴图

### 世界空间法线贴图

### 切线空间法线贴图

<ThreeNormal/>
