# 再探渲染管线

在第一章[WebGL 核心原理概述](./1-webgl-introduction/)中我们简要的介绍了渲染管线的概念，但是今天我想要更加详细的与你介绍渲染管线的概念，并且应用一些例子来解释一些比较难以理解的概念。

## 什么是渲染管线

渲染流水线的工作任务在于由一系列的数据出发、 生成（或者说渲染）一张二维图像。 换句话说， 计算机需要从一系列的顶点数
据、纹理等信息出发，把这些信息最终转换成一张人眼可以看到的图像。而这个工作通常是由 CPU (Application Stage)、 几何阶段(Geometry Stage)、 光栅化阶段(Rasterizer Stage)。

注意， 这里仅仅是概念性阶段， 每个阶段本身通常也是一个流水线系统， 即包含了子流水线阶段。 下图显示了 3 个概念阶段之间的联系。

<ImgContainer :srcs="['/img/renderPipeline/render-pipeline.png']"/>

### 应用阶段

从名字我们可以看出， 这个阶段是由我们的应用主导的， 因此通常由 CPU 负责实现。换句话 说， 我们这些开发者具有这个阶段的绝对控制权。
在这一阶段中， 开发者有 3 个主要任务： 首先， 我们需要准备好场景数据， 例如摄像机的位
置、 视锥体、 场景中包含了哪些模型、 使用了哪些光源等等；其次， 为了提高渲染性能， 我们往
往需要做一个粗粒度剔除(culling)工作， 以把那些不可见的物体剔除出去， 这样就不需要再移
交给几何阶段进行处理；最后， 我们需要设置好每个模型的渲染状态。 这些渲染状态包括但不限
于它使用的材质（漫反射颜色、 高光反射颜色）、 使用的纹理、 使用的 Shader 等。 这一阶段最重
要的输出是渲染所需的几何信息， 即渲染图元(rendering primitives)。 通俗来讲， 渲染图元可以
是点、 线、 三角面等。 这些渲染图元将会被传递给下一个阶段——儿何阶段。
由千是由开发者主导这一阶段， 因此应用阶段的流水线化是由开发者决定的。 这不在本书的
范畴内， 有兴趣的读者可以参考本章的扩展阅读部分。
工序 2 工序 3 工序 3 工序 2
＇ ｀
d 图 2.1 真实生活中的流水线
2.1.2 什么是渲染流水线
和 GPU 共同完成的。
